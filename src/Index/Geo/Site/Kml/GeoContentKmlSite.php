<?phpnamespace Nemundo\Content\Index\Geo\Site\Kml;use Nemundo\Admin\Site\AbstractKmlSite;use Nemundo\Content\Index\Geo\Data\GeoIndex\GeoIndexReader;use Nemundo\Content\Index\Geo\Parameter\GeoIndexParameter;use Nemundo\Geo\Kml\Document\KmlDocument;use Nemundo\Geo\Kml\Object\KmlMarker;class GeoContentKmlSite extends AbstractKmlSite{    /**     * @var GeoContentKmlSite     */    public static $site;    protected function loadSite()    {        $this->title = 'Kml Content';        $this->url = 'kml-content';        GeoContentKmlSite::$site = $this;    }    public function loadContent()    {        $kml = new KmlDocument();        $kml->filename = 'geoindex.kml';        $reader = new GeoIndexReader();        $reader->model->loadContent();        $reader->model->content->loadContentType();        $reader->filter->andEqual($reader->model->id, (new GeoIndexParameter())->getValue());        foreach ($reader->getData() as $geoIndexRow) {            $marker = new KmlMarker($kml);            $marker->label = $geoIndexRow->content->subject;            $marker->geoCoordinate = $geoIndexRow->coordinate;        }        $kml->render();    }}