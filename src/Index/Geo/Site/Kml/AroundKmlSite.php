<?phpnamespace Nemundo\Content\Index\Geo\Site\Kml;use Nemundo\Admin\Site\AbstractKmlSite;use Nemundo\Content\Index\Geo\Data\GeoIndex\GeoIndexReader;use Nemundo\Content\Index\Geo\Parameter\DistanceParameter;use Nemundo\Content\Index\Geo\Parameter\LatitudeParameter;use Nemundo\Content\Index\Geo\Parameter\LongitudeParameter;use Nemundo\Geo\Kml\Document\KmlDocument;use Nemundo\Geo\Kml\Object\KmlMarker;use Nemundo\Model\Filter\GeoCoordinateSquareFilter;class AroundKmlSite extends AbstractKmlSite{    /**     * @var AroundKmlSite     */    public static $site;    protected function loadSite()    {        $this->title = 'Around Kml';        $this->url = 'kml-around';        AroundKmlSite::$site = $this;    }    public function loadContent()    {        $kml = new KmlDocument();        $kml->filename = 'geo_index_around.kml';        $geoReader = new GeoIndexReader();        $geoReader->model->loadContent();        $geoReader->model->content->loadContentType();        $filter = new GeoCoordinateSquareFilter();        $filter->coordinateCenter->latitude = (new LatitudeParameter())->getValue();        $filter->coordinateCenter->longitude = (new LongitudeParameter())->getValue();        $filter->coordinateType = $geoReader->model->coordinate;        $filter->distanceInKilometres = (new DistanceParameter())->getValue();        $geoReader->filter->andFilter($filter);        foreach ($geoReader->getData() as $geoIndexRow) {            $marker = new KmlMarker($kml);            $marker->label = $geoIndexRow->content->subject;            $marker->geoCoordinate = $geoIndexRow->coordinate;        }        $kml->render();    }}